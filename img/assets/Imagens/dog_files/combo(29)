YUI.add("photo-groups-models",function(e){function t(e){t.superclass.constructor.call(this,e)}e.Models[this.name]=t,e.extend(t,e.FlickrModelRegistry,{name:this.name,remote:{read:function(t){return e.ModelFetchers["flickr-photos-getAllContexts"].run(t,this.appContext)}},attributes:{id:{},groups:{isCollection:!0},total:{validator:function(t){return e.AttributeHelpers.validateInteger(t)},setter:function(t){return e.AttributeHelpers.coerceInteger(t)},defaultValue:0}}})},"@VERSION@",{requires:["api-helper","flickr-model-registry","flickr-promise","flickr-photos-getAllContexts-fetcher"]});YUI.add("flickr-photos-getAllContexts-fetcher",function(e,t){"use strict";e.namespace("ModelFetchers")["flickr-photos-getAllContexts"]={run:function(o,s){var l=this;return s.flipper.isFlipped("enable-scrappy-photo-page")&&(o.scrappy=!0),e.Promise.all([s.callAPI("flickr.photos.getAllContexts",this._processParams(o),!0),s.getModelRegistry("person-models"),s.getModelRegistry("photo-contexts-models"),s.getModelRegistry("favorite-models"),s.getModelRegistry("gallery-models"),s.getModelRegistry("group-pool-models"),s.getModelRegistry("set-models"),s.getModelRegistry("photostream-models"),s.getModelRegistry("photo-groups-models"),s.getModelRegistry("photo-sets-models"),s.getModelRegistry("photo-galleries-models"),s.getModelRegistry("group-models")]).then(function(e){return l._processResponse(e,o)},e.FetcherErrorLogger(t))},_processParams:function(t){var o;return o={photo_id:t.id,extras:e.APIHelper.request.getRebootPhotoExtras()+","+e.APIHelper.request.getRebootGroupExtras()+","+e.APIHelper.request.getRebootAlbumsListExtras(),primary_photo_extras:"url_sq, url_t, url_s, url_m, needs_interstitial"},t.scrappy&&(o.get_all_galleries=1,o.no_faves_context=1,o.per_type_limit=6,o.get_totals=1,o.sort="date-desc"),o},_processResponse:function(t,o){var s,l,r=t[0],a=t[1],p=t[2],d={},i=[],g=t[8],n=t[9],u=t[10],m=t[11];return d.faves=t[3],d.gallery=t[4],d.pool=t[5],d.set=t[6],d.stream=t[7],e.Object.each(d,function(t,o){r[o]&&e.Array.each(r[o],function(o){e.APIHelper.response.addContextToRegistry(o,t,a,m),i.push(t.proxy(o.id))})}),p.exists(o.id)||(s=p.add({id:o.id,totalGroups:r.totals&&r.totals.groups,totalSets:r.totals&&r.totals.sets,totalGalleries:r.totals&&r.totals.galleries}),p.setValue(o.id,"contexts",i)),g.addOrUpdate({id:o.id,total:r.totals&&r.totals.groups,groups:p.getContextsOfType(o.id,"group-pool-models")}),(l=p.getContextsOfType(o.id,"set-models")).forEach(function(e){e.setValue("totalCount",parseInt(e.getValue("photoCount"),10)+parseInt(e.getValue("videoCount"),10))}),n.addOrUpdate({id:o.id,total:r.totals&&r.totals.sets,sets:l}),u.addOrUpdate({id:o.id,total:r.totals&&r.totals.galleries,galleries:p.getContextsOfType(o.id,"gallery-models")}),s}}},"@VERSION@",{requires:["flickr-promise","api-helper"],optional:["photo-contexts-models","favorite-models","gallery-models","group-pool-models","photostream-models","set-models","photo-groups-models","photo-sets-models","photo-galleries-models","group-models"]});YUI.add("photo-contexts-models",function(e){function t(e){t.superclass.constructor.call(this,e),this.getMorePromises={"group-pool-models":{},"set-models":{},"gallery-models":{}},this.continuationKeys={"group-pool-models":{},"set-models":{},"gallery-models":{}}}e.Models[this.name]=t,e.extend(t,e.FlickrModelRegistry,{name:this.name,remote:{read:function(t){return this.appContext.flipper.isFlipped("enable-scrappy-photo-page")?e.ModelFetchers["flickr-photos-getAllContexts"].run(t,this.appContext):e.ModelFetchers["flickr-photos-getInfo"].run(t,this.appContext)}},getMoreContextsOfType:function(t,r,o){var s,n,i,l,a,p,u,c=this,g=e.APIHelper.request.getRebootPhotoExtras();switch(r){case"group-pool-models":s="flickr.photos.getGroups",i="groups.group",g+=","+e.APIHelper.request.getRebootGroupExtras();break;case"set-models":s="flickr.photos.getSets",i="sets.set";break;case"gallery-models":s="flickr.photos.getGalleries",i="galleries.gallery"}return s?this.exists(t)?"-1"===(l=this.continuationKeys[r][t]||"0")?e.Promise.resolve({type:r,newContexts:[],loadedAll:!0}):(n={photo_id:t,extras:g,primary_photo_extras:"url_sq, url_t, url_s, url_m",continuation:l,per_page:o},p=t+"_"+l,(u=this.getMorePromises[r][p])?u:(this.getMorePromises[r][p]=new e.FlickrPromise({apiResponse:this.appContext.callAPI(s,n,!0),contextRegistry:this.appContext.getModelRegistry(r),personRegistry:this.appContext.getModelRegistry("person-models")}).then(function(o){var s,n,l,u=[],g=o.apiResponse,d=o.contextRegistry,f=o.personRegistry;return(n=i.split(".").reduce(function(t,r){return e.Lang.isObject(t)?t[r]:void 0},g))&&(e.Array.each(n,function(t){e.APIHelper.response.addContextToRegistry(t,d,f),u.push(d.proxy(t.id))}),u.length&&(l=c.getContextsOfType(t,r).map(function(e){return e.getValue("id")}),(u=u.filter(function(e){return-1===l.indexOf(e.getValue("id"))})).length&&c.getValue(t,"contexts").appendToListMulti(u))),void 0===(a=g.continuation)?a="-1":e.Lang.isNumber(a)&&(a+=""),s="-1"===a,c.continuationKeys[r][t]=a,delete c.getMorePromises[r][p],{type:r,newContexts:u,loadedAll:s}}),this.getMorePromises[r][p])):e.Promise.reject("[photo-contexts-models] getMoreContextsOfType was called for an ID that isn't in the registry: "+t):e.Promise.reject("[photo-contexts-models] getMoreContextsOfType was called without an invalid type: "+r)},getContextsOfType:function(t,r){return r=e.Array(r),this.getValue(t,"contexts").getList().filter(function(e){return r.indexOf(e.registry.name)>-1})},getContextsNotOfType:function(t,r){return r=e.Array(r),this.getValue(t,"contexts").getList().filter(function(e){return-1===r.indexOf(e.registry.name)})},attributes:{contexts:{isCollection:!0},totalGroups:{validator:function(t){return e.AttributeHelpers.validateInteger(t)},setter:function(t){return e.AttributeHelpers.coerceInteger(t)},defaultValue:0},totalSets:{validator:function(t){return e.AttributeHelpers.validateInteger(t)},setter:function(t){return e.AttributeHelpers.coerceInteger(t)},defaultValue:0},totalGalleries:{validator:function(t){return e.AttributeHelpers.validateInteger(t)},setter:function(t){return e.AttributeHelpers.coerceInteger(t)},defaultValue:0}}})},"@VERSION@",{requires:["api-helper","flickr-model-registry","flickr-promise","flickr-photos-getInfo-fetcher","flickr-photos-getAllContexts-fetcher"]});YUI.add("vr-overlay-view",function(e,t){var i,n=require("hermes-core/flog")(t);i={css:{destinationContainer:"body",closeX:".close"},options:{}},e.FlickrView.create(this.name,e.FlickrView,[],{langBundles:this.details.langBundles,initializer:function(e){return this.photoId=e.photoId,this.nsid=e.nsid,""===this.get("container").get("innerHTML")&&this.setContainerHTML(""),this.immersed=!1,this},subviewConfig:{},loadState:function(){var e=this;return this.appContext.getModel("photo-models",e.photoId).then(function(t){return e.set("photo",t),e.canVr().then(function(t){e.set("canVr",t)})})},buildContainer:function(){var e=this.get("canVr");return this.set("isActiveViewAgnostic",!0),e?(this.setContainerWithTemplate("vr-overlay"),this):this},buildErrorContainer:function(){this.setContainerHTML("")},activate:function(){var t=this;if(this.get("canVr"))return this.loadFlickvr().then(function(){var n=t.get("container");n.addClass("active"),n.one(i.css.closeX)&&t.registerEventHandler(n.one(i.css.closeX).on("click",e.bind(t.closeVr,t))),t.registerEventHandler(t.get("container").on("click",t.openVr,t)),t.isMobile||t.openVr()}).then(null,function(e){n.error("Failed to load flickvr from CDN",{err:e})}),this},loadFlickvr:function(){return new e.Promise(function(t,i){if(window.Flickvr)return t();e.Get.js("https://combo.staticflickr.com/ap/flickvr/version.js",function(o){return o?i():window.FlickvrVersion?void e.Get.js("https://combo.staticflickr.com/ap/flickvr/"+window.FlickvrVersion+".js",function(e){return e?i():(n.log("flickvr loaded successfully from CDN"),t())}):i()})})},hasEquirectangularTag:function(){return this.appContext.getModel("photo-tags-models",this.photoId).then(function(e){var t=!1;return e.toJSON().tags.forEach(function(e){"equirectangular"===e.tagRaw.toLowerCase()&&(t=!0)}),t})},inEquirectangularGroup:function(){return this.appContext.getModel("photo-groups-models",this.photoId).then(function(e){var t=!1;return e.toJSON().groups.forEach(function(e){"44671723@N00"===e.id&&(t=!0)}),t})},canVr:function(){var t,i,n=!1;return this.appContext.flipper.isFlipped("enable-vr")?((t=this.get("photo"))&&(i=t.getValue("aspectRatio"))&&i>=1.99&&i<=2.01&&(n=!0),n?e.Promise.all([this.appContext.callAPI("flickr.vr.isEquirectangular",{photo_id:t.id})]).then(function(t){return e.Promise.resolve(!!t[0].is_equirectangular)}):e.Promise.resolve(!1)):e.Promise.resolve(!1)},onParentViewEvent:function(e,t){if(t&&t[0])switch(t[0]){case"vrIconClicked":this.openVr();break;case"vKeyPressed":this.toggleVr()}},toggleVr:function(){this.immersed?this.closeVr():this.openVr()},openVr:function(t){if(this.immersed||t&&t.target.hasClass("close"))this.vr.controls&&this.vr.controls.autoRotate&&(this.vr.controls.autoRotate=!1);else{var i,n,o=this,r=this.get("photo").getLargestSize(),s=this.templates("flickr-balls")({}),a=new Image;t&&t.halt(),(n=e.Node.create("<div></div>")).addClass("vr-loading-layer"),n.addClass("fluid"),n.append(s),o.get("container").append(n),i=r.displayUrl,a.crossOrigin="anonymous",a.onload=function(){o.immersed=!0,o.vr=new window.Flickvr,o.vr.initialize(i,{container:o.get("container").getDOMNode(),useContainerDimensions:!o.isMobile,enableVrHeadset:o.appContext.flipper.isFlipped("enable-vr-headset"),autoRotate:!o.isMobile}).then(function(t){e.fire("photo:entering-vr"),t.style.position="absolute",o.vr.enterVR(),o.get("container").one(".vr-loading-layer").remove(),o.get("container").addClass("immersed"),o.escHandle=o.attachKeyEvent("down:27",e.betterThrottle(o.closeVr.bind(o),100))})},a.src=i}},closeVr:function(e){var t=this.get("container");e&&e.preventDefault(),this.vr&&this.vr.destroy(),this.escHandle&&(this.detachRegisteredEvent(this.escHandle),delete this.escHandle),this.immersed=!1,t.removeClass("immersed")},beforeDestroy:function(){this.set("lastContainer",this.get("container")),this.immersed&&this.closeVr()},destructor:function(){var e=this.get("lastContainer");e&&(e.remove(!0),this.set("lastContainer",null))}})},"@VERSION@",{requires:["flickr-view","better-throttle","get","hermes-template-vr-overlay","hermes-template-flickr-balls"],optional:["photo-models","photo-tags-models","photo-groups-models"],langBundles:["common","photo-page-scrappy"]});YUI.add("hermes-lang-photo-page-scrappy_pt-br",function(a,o){a.Intl.add("hermes/photo-page-scrappy","pt-BR",{PAGE_TITLE:["${title}"," | Flickr"],BACK_TO:["Voltar para ","${entryType}"],COULDNT_UPDATE_SETTINGS:["Não podemos atualizar suas configurações"],ADULT_CONTENT:["Conteúdo adulto"],MATURE_AUDIENCES:["Este conteúdo é para público adulto somente."],USER_DISCRETION:["É aconselhado critério ao usuário."],SHOW_ME_THIS_CONTENT_TYPE:["Mostre-me este tipo de conteúdo a partir de agora"],CHANGE_SAFE_SEARCH_IN_SETTINGS:['Você sempre pode alterar as <a href="/account/prefs/safesearch/?from=privacy"  data-track="photoWellSafeSearchClick">Configurações do SafeSearch</a> em preferências de conta.'],SIGNED_IN_FOR_CONTENT:["Você deve entrar para ver este conteúdo."],VIDEO_COMING_SOON:["Suporte para vídeo em breve"],FIND_OUT_MORE_AD:["Saiba mais em ","${brand}"],SHARE_THIS_PHOTO:["Compartilhar esta foto"],DOWNLOAD_THIS_VIDEO:["Baixar este vídeo"],DOWNLOAD_THIS_PHOTO:["Baixar esta foto"],VIEW_ALL_SIZES:["Exibir todos os tamanhos"],DOWNLOAD_PHOTO:["Baixar a foto"],SOME_RIGHTS_RESERVED:["Alguns direitos reservados"],DOWNLOAD:["Baixar"],ERROR_LOADING_CONTEXT:["Erro ao carregar contexto"],ADD_TITLE:["Adicionar título"],ADD_DESCRIPTION:["Adicionar descrição"],TITLE_DESCRIPTION_FAILURE:["Não podemos alterar o Título e a Descrição neste momento."],VIEW_PREVIOUS_COMMENT:["Exibir comentário anterior"],VIEW_MORE_PREVIOUS_COMMENTS:["Exibir ","${count}"," comentários anteriores"],EMPTY_COMMENT_ERROR:["Uma caixa de comentário vazia? Isso não vai funcionar!"],COMMENT_RATE_LIMIT_ERROR:["Devagar, parceiro! Para proteger a comunidade Flickr contra spam e comportamento de spam, colocamos algumas restrições ao comentar."],COMMENT_POST_ERROR:["Não podemos publicar o seu comentário."],MORE_COMMENTS_ERROR:["Não podemos obter mais comentários."],COMMENT_PERMALINK_ERROR:["Não conseguimos encontrar o comentário especificado na foto."],DELETE_COMMENT:["Excluir comentário"],COMMENT_DELETE_CONFIRMATION:["Tem certeza que deseja excluir este comentário?"],COMMENT_DELETE_ERROR:["Não podemos apagar seu comentário."],COMMENT_LOADING_ERROR:["Erro ao carregar os comentários"],COMMENT:["Comentário"],SHOW_MORE_COMMENTS:["${count}"," mais"],REPLY:["Responder"],PERMALINK:["Permalink"],SINGLE_FAVER:['<a class="faved-by-person-link" href="/photos/',"${pathAlias}",'/">',"${displayName}","</a> favoritaram isto"],DOUBLE_FAVER:['<a class="faved-by-person-link" href="/photos/',"${pathAliasOne}",'/">',"${displayNameOne}",'</a> e <a class="faved-by-person-link" href="/photos/',"${pathAliasTwo}",'/">',"${displayNameTwo}","</a> favoritaram isto"],TRIPLE_FAVER:['<a class="faved-by-person-link" href="/photos/',"${pathAliasOne}",'/">, ',"${displayNameOne}",', </a><a class="faved-by-person-link" href="/photos/',"${pathAliasTwo}",'/">',"${displayNameTwo}",'</a> e <a class="faved-by-person-link" href="/photos/',"${pathAliasThree}",'/">',"${displayNameThree}","</a> favoritaram isto"],MULTI_FAVER:['<a class="faved-by-person-link" href="/photos/',"${pathAliasOne}",'/">',"${displayNameOne}",'</a>, <a class="faved-by-person-link" href="/photos/',"${pathAliasTwo}",'/">',"${displayNameTwo}",'</a> e outras <a class="remaining-faved-by" href="#">',"${count}"," pessoas</a> favoritaram isto"],RELATIONSHIP_FRIEND_ERROR:["Ocorreu um problema ao definir a sua relação com um amigo."],RELATIONSHIP_FAMILY_ERROR:["Ocorreu um problema ao definir a sua relação com um familiar."],HIDE_EXIF:["Ocultar EXIF"],SHOW_EXIF:["Mostrar EXIF"],EDIT_LOCATION:["Editar localização"],EDIT_LOCATION_ORGANIZR:["Estamos trabalhando duro para reformular a novíssima experiência fotográfica. Por enquanto, você pode editar a localização no Organizr."],SAVE_LOCATION:["Salvar local"],APERTURE:["Abertura"],FOCAL_LENGTH:["Distância do foco"],EXPOSURE_TIME:["Tempo de exposição"],FLASH_AUTO_FIRED:["Flash (auto, disparado)"],FLASH_AUTO_NO_FIRE:["Flash (auto, não disparado)"],FLASH_ON_FIRED:["Flash (ligado, disparado)"],FLASH_ON_NO_FIRE:["Flash (ligado, não disparado)"],FLASH_OFF:["Flash (desligado, não disparado)"],FLASH_SIMPLE_ON:["Ativado"],FLASH_SIMPLE_OFF:["Desativado"],POWERED_BY:["DESENVOLVIDO POR"],FOURSQUARE:["FOURSQUARE"],ADD_PHOTO_TO_MAP:["Adicionar esta foto ao seu mapa"],SINGULAR_FAVE:["favorito"],PLURAL_FAVE:["favoritos"],SINGULAR_VIEW:["visualização"],PLURAL_VIEW:["visualizações"],SINGULAR_COMMENT:["comentário"],PLURAL_COMMENT:["comentários"],LICENSE_ERROR:["Ocorreu um problema ao alterar a licença de sua foto"],ALL_RIGHTS_RESERVED:["Todos os direitos reservados"],NO_RESTRICTIONS:["Sem restrições de direitos autorais conhecidas"],PUBLIC_DOMAIN:["Domínio público"],USA_GOV_WORK:["Trabalho do governo dos Estados Unidos"],SAFETY_CHANGE_ERROR:["Ocorreu um erro ao alterar o nível de segurança de sua foto"],PRIVACY_CHANGE_ERROR:["Ocorreu um problema ao alterar a privacidade de sua foto"],COMMENT_PERM_CHANGE_ERROR:["Ocorreu um erro ao alterar a permissão para comentar em sua foto"],FLAG_PHOTO:["Sinalizar foto"],MARK_FOR_REVIEW:["Marcar para análise"],ADDITIONAL_INFO:["Informações adicionais"],VIEWING_THIS_PHOTO:["Exibição desta foto"],PRIVACY_UPDATE_ERROR:["Ocorreu um erro ao atualizar a privacidade. Tente de novo."],META_PERMS_UPDATE_ERROR:["Ocorreu um erro ao atualizar a permissão para acréscimo meta. Tente de novo."],ADD_META_TO_THIS_PHOTO:["Acrescentar tags e pessoas a esta foto"],COMMENT_PERMS_UPDATE_ERROR:["Ocorreu um erro ao atualizar a permissão para comentar. Tente de novo."],COMMENTING_ON_THIS_PHOTO:["Comentando nesta foto"],SAFETY_UPDATE_ERROR:["Ocorreu um erro ao atualizar o nível de segurança. Tente de novo."],SAFETY_LEVEL_OF_PHOTO:["Nível de segurança desta foto"],FLAG_ERROR:["Ocorreu um erro ao tentar sinalizar esta foto. Tente de novo."],PROVIDE_FEEDBACK:["Dê um feedback sobre a nova página de fotos"],ERROR_DELETING_AUTOTAG:["Erro ao excluir autotag"],AUTOTAGS:["Autotags"],CONTACT_LIST_ERROR:["Houve um erro ao tentar obter sua lista de contatos. Tente de novo."],FAILED_TO_REMOVE_PERSON:["Falha ao remover esta pessoa da foto neste momento."],PERSON_CANNOT_BE_TAGGED:["Esta pessoa não pode ser marcada."],PEOPLE_IN_PHOTO:["Pessoas na foto"],ADD_PEOPLE:["Adicionar pessoas"],ADD_PERSON:["Adicionar uma pessoa"],ERROR_REMOVING_FROM_GROUP:["Houve um problema ao remover esta foto do grupo"],ERROR_ACCEPTING_INVITATION:["Houve um problema ao aceitar o convite do grupo"],SEARCH_GROUPS:["Buscar grupos"],PHOTO_NOT_IN_GROUPS:["Esta foto atualmente não está em nenhum grupo"],ADD_TO_GROUP:["Adicionar ao grupo"],INVITE_TO_GROUP:["Convidar para o grupo"],ONE_GROUP_INVITATION:["Você tem 1 convite para o grupo"],N_GROUP_INVITATIONS:["Você tem ","${count}"," convites para o grupo"],VIEW_MORE_GROUPS:["Exibir mais grupos"],ERROR_REMOVING_FROM_ALBUM:["Houve um problema ao remover esta foto do álbum"],WARNING_REMOVE_LAST_PHOTO_FROM_ALBUM:["Você está prestes a remover a última foto do álbum, o que também apagará o álbum."],REMOVE_PHOTO_AND_ALBUM:["Remover foto e apagar álbum"],ADD_PHOTO_TO_ALBUM:["Adicionar esta foto a um álbum"],SEARCH_ALBUMS:["Buscar álbuns"],ADD_TO_ALBUM:["Adicionar ao álbum"],PHOTO_NOT_IN_ALBUMS:["Esta foto atualmente não está em nenhum álbum"],VIEW_MORE_ALBUMS:["Exibir mais álbuns"],PHOTO_IN_ONE_ALBUM:["Esta foto está em 1 álbum"],PHOTO_IN_N_ALBUMS:["Esta foto está em ","${count}"," álbuns"],INVITE_PENDING:["Convite pendente"],CANCEL_INVITE:["Cancelar convite"],ACCEPT_INVITE:["Aceitar convite"],ONE_ITEM:["1 item"],N_ITEMS:["${count}"," itens"],ERROR_REMOVING_FROM_GALLERY:["Houve um problema ao remover esta foto da expô"],SEARCH_GALLERIES:["Buscar expô"],ADD_TO_GALLERY:["Adicionar à expô"],PHOTO_NOT_IN_GALLERIES:["Esta foto atualmente não está em nenhuma expô"],VIEW_MORE_GALLERIES:["Exibir mais exposições"],PHOTO_IN_ONE_GALLERY:["Esta foto está em 1 expô"],PHOTO_IN_N_GALLERIES:["Esta foto está em ","${count}"," exposições"],DELETE_PHOTO:["Excluir foto"],PERMANTENTLY_DELETE:["Deseja excluir permanentemente esta foto?"],EDIT_PHOTO:["Editar foto"],NO_VIDEO_ROTATION:["Vídeos não podem ser girados"],ROTATE:["Girar"],NO_VIDEO_REPLACE:["Vídeos não podem ser substituídos"],REPLACE:["Substituir"],PHOTO_NAVIGATION:["Navegação por fotos"],THUMBNAIL_NAVIGATION:["Navegação por miniaturas"],ZOOM:["Zoom"],VIEW_IN_LIGHTBOX:["Exibir em caixa iluminação"],BACK_TO_CONTEXT:["Voltar para o contexto"],ADD_TAG:["Adicionar tag"],GO_TO_ORGANIZER:["Vá ao Organizr"],ALBUM:["álbum"],ALBUMS:["álbuns"],ERROR_LOADING_ALBUMS:["Houve um problema ao carregar seus álbuns"],ERROR_ADDING_PHOTO_TO_ALBUM:["Houve um problema ao adicionar esta foto ao álbum"],ERROR_REMOVING_PHOTO_FROM_ALBUM:["Houve um problema ao remover esta foto do álbum"],ERROR_LOADING_GROUPS:["Houve um problema ao carregar os grupos aos quais você pode adicionar fotos"],ERROR_ADDING_TO_GROUP:["Houve um problema ao adicionar esta foto ao grupo"],ERROR_ADDING_TO_GROUP_NOT_OWNER:["Lamentamos, não foi possível adicionar a foto ao grupo porque você não é proprietário da foto."],ERROR_ADDING_TO_GROUP_NOT_MEMBER:["Lamentamos, não foi possível adicionar a foto ao grupo. Você não é um membro do grupo."],ERROR_ADDING_TO_GROUP_ALREADY_IN_POOL:["A foto já está no acervo do grupo."],ERROR_ADDING_TO_GROUP_MAX_POOLS:["Lamentamos, não foi possível adicionar a foto ao grupo porque já foi atingido o número máximo de itens no acervo do grupo."],ERROR_ADDING_TO_GROUP_MAX_PHOTOS_FROM_USER:["Lamentamos, não foi possível adicionar a foto ao grupo. Você já adicionou o número máximo de fotos à galeria."],ERROR_ADDING_TO_GROUP_ADDED_TO_QUEUE:["Sua foto foi adicionada à fila pendente do grupo."],ERROR_ADDING_TO_GROUP_ALREADY_IN_QUEUE:["Sua foto já está na fila pendente do grupo."],ERROR_ADDING_TO_GROUP_INVALID_CONTENT:["Lamentamos, não foi possível adicionar a foto ao grupo. Para obter mais informações, verifique os requisitos do grupo para tipo de mídias, tipo de conteúdo, nível de segurança e localização geográfica."],ERROR_ADDING_TO_GROUP_MAX_IN_POOL:["Lamentamos, não foi possível adicionar a foto ao grupo. O grupo tem o número máximo de fotos permitidas no acervo."],ERROR_INVITING_TO_GROUP:["Houve um problema ao convidar esta foto ao grupo"],ERROR_CANCELING_GROUP_INVITIATON:["Houve um problema ao cancelar o convite desta foto para o grupo"],NO_MATCHES:["Sem correspondência"],CREATE_NEW:["Criar novo"],ERROR_LOADING_GROUP_INVITATIONS:["Houve um problema ao carregar os convites de grupo desta foto"],NO_GROUP_INVITATIONS:["Sem convites de grupo pendentes"],PENDING_INVITATIONS_FOR_PHOTO:["Convites pendentes para esta foto"],LOADING_INVITATIONS:["Carregando convites"],ERROR_LOADING_GALLERIES:["Houve um problema ao carregar suas exposições"],ERROR_ADDING_TO_GALLERY:["Houve um problema ao adicionar esta foto à expô"],ERROR_PHOTO_NOT_ALLOWED_IN_GALLERY:["O proprietário desta foto não permitiu que a foto fosse adicionada a sua expô"],ERROR_CREATING_GALLERY:["Houve um problema ao criar sua nova expô"],DATE_TAKEN_FORMAT:["A data da foto deve ser no formato MM/DD/AAAA hh:mm:ss."],DATE_POSTED_FUTURE:["A data de publicação não pode ser futura."],DATE_UPLOADED_FUTURE:["A data de upload não pode ser futura."],DATE_POSTED_FLICKR_JOIN:["A data de publicação deve ser depois que você entrou no Flickr."],DATE_UPLOADED_FLICKR_JOIN:["A data de upload deve ser depois que você virou membro do Flickr."],ERROR_SAVING_DATE:["Erro ao salvar datas"],DATE_INVALID:["Uma ou mais datas são inválidas"],EDIT_DATES:["Editar datas"],DATE_TAKEN_ON:["Data em que foi tirada"],DATE_POSTED_ON:["Data de publicação"],DATE_UPLOADED_ON:["Data de upload em"],TAKEN_CIRCA:["Tirada circa ","${intlDate}"],TAKEN_SOMETIME_IN:["Tirada em torno de ","${intlDate}"],TAKEN_IN:["Tirada em ","${intlDate}"],TAKEN_ON:["Tirada em ",{type:"date",valueName:"intlDate",format:"long"}],UPLOADED_ON:["Carregado em ","${intlDate}"],SOMETHING_WENT_WRONG:["Algo deu errado."],REFRESH_BROWSER:["Atualize seu navegador e tente novamente."],TWITTER_NOT_FOUND:["Conta do Twitter não encontrada na postagem"],TUMBLR_NOT_FOUND:["Conta do Tumblr não encontrada na postagem"],LINK:["Link"],LINK_TO_VIDEO:["Link para este vídeo:"],LINK_TO_PHOTO:["Link para esta foto:"],NO_LINKS_FOR_RESTRICTED_VIDEO:["Links não disponíveis para vídeos restritos"],PRIVATE_VIDEO_SHARE:["Este vídeo é privado, ainda quer compartilhá-lo?"],NO_LINKS_FOR_RESTRICTED_PHOTO:["Links não disponíveis para fotos restritas"],PRIVATE_PHOTO_SHARE:["Esta foto é privada, ainda quer compartilhá-la?"],SHARING_RESTRICTED_VIDEO:["Compartilhamento restrito para este vídeo"],SHARING_RESTRICTED_PHOTO:["Compartilhamento restrito para esta foto"],EMBED:["Inserir"],PUBLIC_TO_SHARE:["Compartilhe esta foto de forma pública para exibir o código incorporado"],SIZE:["Tamanho:"],TITLE_AND_OWNER_AT_START:["Mostrar título e proprietário no início"],SHARE_NOW:["Compartilhar agora!"],SHARE_PHOTO:["Compartilhar foto"],SHARE_ON_TWITTER:["Compartilhar no Twitter"],AUTHORIZE_FOR_TWITTER:["autorize o Flickr a publicar no Twitter"],SHARE_ON_TUMBLR:["Compartilhar no Tumblr"],PUBLISH_NOW:["Publicar agora"],ADD_TO_QUEUE:["Adicionar à fila"],SAVE_AS_DRAFT:["Salvar como rascunho"],AUTHORIZE_FOR_TUMBLR:["autorize o Flickr a publicar no Tumblr"],SHARE_VIA_MAIL:["Compartilhar por email"],SCREEN_NAME_OR_EMAIL:["Nome para exibição ou email"],SQUARE:["Quadrado"],SMALL:["Pequena"],MEDIUM:["Média"],LARGE:["Grande"],ORIGINAL:["Original"],DUPLICATE_TAG:["Duplicar tag"],INVALID_TAG:["Tag inválida"],MAXIMUM_TAG_LIMIT:["Limite máximo de tags (76) atingido"],MAX_TAG_LIMIT:["Limite máximo de tags (75) atingido"],ERROR_ADDING_TAG:["Erro ao adicionar tag"],ERROR_DELETING_TAG:["Erro ao apagar tag"],TAGS:["Tags"],ADD_TAGS:["Adicionar tags"],ADD_A_TAG:["Adicionar uma tag"],PHOTO_IN_ONE_GROUP:["Esta foto está em 1 grupo"],PHOTO_IN_MANY_GROUPS:["Esta foto está em ",{type:"number",valueName:"count"}," grupos"],PHOTO_IN_NO_GROUPS:["Esta foto não está em nenhum grupo"],ADD_A_COMMENT:["Adicionar um comentário"],COMMENT_TUTORIAL:["pressione Enter para publicar e Shift+Enter para nova linha"],SIGNED_IN_TO_POST_A_COMMENT:["Você deve estar conectado para publicar um comentário"],SHARE:["Compartilhar"],CODE:["Código"],INCLUDE_A_MESSAGE:["Inclua uma mensagem"],FOR_MORE_INFORMATION_SAFESEARCH:['Para mais informações, leia <a href="//www.flickr.com/help/photos/?search=flag#145">estas Perguntas frequentes</a>.'],FLAG_CONFIRMATION_SAFE_WITHIN:['Esta foto foi marcada como <a href="//www.flickr.com/help/filters/#258">segura</a> e está de acordo com suas <a href="//www.flickr.com/account/prefs/safesearch/">configurações do SafeSearch</a>.'],FLAG_CONFIRMATION_SAFE_OUTSIDE:['Esta foto foi marcada como <a href="//www.flickr.com/help/filters/#258">segura</a> e não está de acordo com suas <a href="//www.flickr.com/account/prefs/safesearch/">configurações do SafeSearch</a>.'],FLAG_CONFIRMATION_MODERATE_WITHIN:['Esta foto foi marcada como <a href="//www.flickr.com/help/filters/#258">moderada</a> e está de acordo com suas <a href="//www.flickr.com/account/prefs/safesearch/">configurações do SafeSearch</a>.'],FLAG_CONFIRMATION_MODERATE_OUTSIDE:['Esta foto foi marcada como <a href="//www.flickr.com/help/filters/#258">moderada</a> e não está de acordo com suas <a href="//www.flickr.com/account/prefs/safesearch/">configurações do SafeSearch</a>.'],FLAG_CONFIRMATION_RESTRICTED_WITHIN:['Esta foto foi marcada como <a href="//www.flickr.com/help/filters/#258">restrita</a> e está de acordo com suas <a href="//www.flickr.com/account/prefs/safesearch/">configurações do SafeSearch</a>.'],FLAG_CONFIRMATION_RESTRICTED_OUTSIDE:['Esta foto foi marcada como <a href="//www.flickr.com/help/filters/#258">restrita</a> e não está de acordo com suas <a href="//www.flickr.com/account/prefs/safesearch/">configurações do SafeSearch</a>.'],PRIVATE_PHOTO:["Foto privada"],PHOTO_UNFIT_FOR_YOUR_EYES:["Foto inadequada para você. Olhe, um gatinho: (^._.^)ﾉ"],NO_PHOTO_WITH_THAT_ID:["Nenhuma foto encontrada com a id ","${photoId}"],NO_MEMBERS_FOUND:["Nenhum membro encontrado"],TAKEN_ON_INTL:["Tirada em ",{type:"date",valueName:"intlDate",format:"long"}],UPLOADED_ON_INTL:["Carregado em ",{type:"date",valueName:"intlDate",format:"long"}],TAKEN_IN_MONTH:["Tirada em ",{type:"date",valueName:"intlDate",format:"monthYear"}],VIEW_IN_LIGHTBOX_SHORTCUT:["Exibir em caixa de iluminação"],ZOOM_MAX_MESSAGE:["Calma aí, amigo! Esta foto já está no tamanho máximo."],CLICK_TO_FAVE_PHOTO:["Clique aqui para favoritar esta foto"],CLICK_TO_FAVE_VIDEO:["Clique aqui para favoritar este vídeo"],BACK_TO_ACTIVITY_FEED:["Voltar ao feed de atividades"],BACK_TO_PHOTOSTREAM:["Voltar ao fluxo de fotos"],BACK_TO_SHARED_PHOTOS:["Voltar para fotos compartilhadas"],BACK_TO_ALBUM:["Voltar ao álbum"],BACK_TO_CONTACTS_LIST:["Voltar à lista de contatos"],BACK_TO_FAVORITES:["Voltar aos favoritos"],BACK_TO_GALLERY:["Voltar à galeria"],BACK_TO_PROFILE:["Voltar ao perfil"],BACK_TO_EXPLORE:["Voltar a explorar"],BACK_TO_COMMONS:["Voltar aos comuns"],BACK_TO_GROUP:["Voltar ao grupo"],BACK_TO_GROUPS:["Voltar para grupos"],BACK_TO_MAP:["Voltar ao mapa"],BACK_TO_SEARCH:["Voltar para a busca"],BACK_TO_TAG:["Voltar à tag"],ERROR_ADDING_PHOTOS_TO_ALBUM:["Houve um problema ao adicionar estas fotos ao álbum"],ERROR_REMOVING_PHOTOS_FROM_ALBUM:["Houve um problema ao remover estas fotos do álbum"],ERROR_CREATING_ALBUM:["Houve um problema ao criar seu novo álbum"],STRICTER_PRIVACY_CHANGE_DIALOG_TITLE:["Mudança para um nível mais restrito de privacidade"],STRICTER_PRIVACY_CHANGE_DIALOG_MESSAGE:["Ao mudar uma foto para um nível mais restrito de privacidade, os favoritos acumulados até o momento serão apagados e a URL da foto será alterada."],TAGS_HELPER_TEXT:["Tags são palavras-chave que facilitam a localização de fotos. Acrescente quantas quiser e os robôs do Flickr tentarão ajudar adicionando algumas delas para você."],TAGS_HELP_TEXT:["Tags são palavras-chave que facilitam a localização de fotos na busca do Flickr. As tags que você adicionar serão exibidas em cinza-escuro. Os robôs do Flickr tentarão ajudar acrescentando algumas tags para você; estas aparecerão com apenas um contorno cinza."],PRIVATE_TAGS_OWNER_HELPER_TEXT:["Esta tag privada está visível somente para você, bem como para seus amigos e familiares que têm permissão para ver esta foto."],PRIVATE_TAGS_FRIENDS_FAMILY_HELPER_TEXT:["Esta tag privada está visível somente para você, pois você é amigo ou familiar do dono da foto."],CREATE_WALLART_WITH_PHOTO:["Criar um quadro com esta foto"],ERROR_ROTATING_PHOTO:["Houve um problema ao girar esta foto, feche e tente novamente."],ROTATE_PHOTO:["Girar foto"],ERROR_REPLACING_PHOTO:["Houve um problema ao substituir esta foto, feche e tente novamente."],REPLACE_PHOTO:["Substituir foto"],PERMANENTLY_REPLACE:['Substituir permanentemente a foto ("',"${photoTitle}",'" de ',"${username}",") por <em>","${fileName}","</em>?"],REPLACE_WARNING:["Não é possível desfazer a substituição de uma foto. Selecione um arquivo para substituir esta foto."],REPLACE_UPLOADING:["Fazendo upload de <em>","${fileName}","</em>..."],ERROR_DELETING_PHOTO:["Houve um problema ao apagar esta foto, feche e tente novamente."],SHOW_MORE_STATS:["Mostrar mais estatísticas"],SIGNUP_AND_DOWNLOAD_TITLE:["Você encontrou uma foto para baixar!"],SIGNUP_AND_DOWNLOAD_VIDEO_TITLE:["Você encontrou um vídeo para baixar!"],SIGNUP_AND_DOWNLOAD_MESSAGE:["Entre no Flickr para acessar bilhões de fotos."],SIGNUP_AND_COMMENT_TITLE:["Comente nesta foto!"],SIGNUP_AND_COMMENT_MESSAGE:["Participe do Flickr para deixar um comentário nesta foto."],IMMERSIFY:["Imersão"],SIGNUP_FOOTER_MESSAGE:["Participe do Flickr para explorar fotos de alto nível"],TIMEOUT_FAILURE:["Devido a problemas, não podemos mostrar esta foto no momento. Tente novamente."],BUY:["Comprar"],ADD_A_NOTE:["Adicionar uma nota"],CONFIRM_NOTE_DELETION:["Tem certeza de que deseja apagar esta nota definitivamente?"],VIEWING_PRIVACY:["Privacidade de visualização"],ALLOW_COMMENTING:["Permitir comentários"],ALLOW_TAGS_NOTES_PEOPLE:["Permitir tags, observações e tags de pessoas"],SAFETY_LEVEL:["Nível de segurança"],SET_SAFETY_LEVEL:["Definir nível de segurança"],KEYBOARD_SHORTCUTS:["Atalhos de teclado"],EDITOR_UPGRADE:["Atualização do Editor de fotos"],EDITOR_UPGRADE_MESSAGE:["O recurso de edição de fotos na página de fotos do Flickr está desativado no momento, pendendo uma atualização.<br><br>Muito em breve, você terá acesso a um editor de fotos mais estável e com mais recursos para complementar sua experiência com o Flickr!<br><br>Pedimos desculpas por essa atualização inesperada, mas temos certeza de que a espera valerá a pena."],ERROR_REPLACING_PHOTO_FILE_TYPE:["Ocorreu um erro ao substituir a foto.  O tipo de arquivo não foi reconhecido. Tente novamente com uma foto diferente."],EDITING_DISABLED:["O recurso de edição está desativado"],ENTER_TO_EDIT_TITLE_DESC:["Pressione Enter para editar o título ou a descrição."],BACK_TO_PHOTOSTREAM_EDIT:["Voltar para a edição da galeria"],ALLOW_PRINTS_ON_PHOTO:["Permissão para comprar impressões"],AUTO_MODERATION_MESSAGE:['O Bot de moderação do Flickr 🤖 alterou o nível de segurança desta foto. <a class="learn-link" href="',"${learnUrl}",'">Saiba mais</a>.']})},"@VERSION@",{requires:["intl"]});YUI.add("hermes-template-zoom-modal",function(l,n){var e=l.Template.Handlebars.revive({1:function(l,n,e,r,a){var o,t=l.lookupProperty||function(l,n){if(Object.prototype.hasOwnProperty.call(l,n))return l[n]};return'<img src="'+l.escapeExpression("function"==typeof(o=null!=(o=t(e,"smallSrc")||(null!=n?t(n,"smallSrc"):n))?o:l.hooks.helperMissing)?o.call(null!=n?n:l.nullContext||{},{name:"smallSrc",hash:{},data:a,loc:{start:{line:3,column:28},end:{line:3,column:40}}}):o)+'" class="zoom-small">'},3:function(l,n,e,r,a){var o,t=l.lookupProperty||function(l,n){if(Object.prototype.hasOwnProperty.call(l,n))return l[n]};return'<img src="'+l.escapeExpression("function"==typeof(o=null!=(o=t(e,"largeSrc")||(null!=n?t(n,"largeSrc"):n))?o:l.hooks.helperMissing)?o.call(null!=n?n:l.nullContext||{},{name:"largeSrc",hash:{},data:a,loc:{start:{line:4,column:28},end:{line:4,column:40}}}):o)+'" class="zoom-large">'},5:function(l,n,e,r,a){var o,t=l.lookupProperty||function(l,n){if(Object.prototype.hasOwnProperty.call(l,n))return l[n]};return'<img src="'+l.escapeExpression("function"==typeof(o=null!=(o=t(e,"xLargeSrc")||(null!=n?t(n,"xLargeSrc"):n))?o:l.hooks.helperMissing)?o.call(null!=n?n:l.nullContext||{},{name:"xLargeSrc",hash:{},data:a,loc:{start:{line:5,column:29},end:{line:5,column:42}}}):o)+'" class="zoom-xlarge">'},compiler:[8,">= 4.3.0"],main:function(l,n,e,r,a){var o,t=null!=n?n:l.nullContext||{},c=l.lookupProperty||function(l,n){if(Object.prototype.hasOwnProperty.call(l,n))return l[n]};return'<div class="zoom-modal hidden">\n\t<div class="zoom-photo-container">\n\t\t'+(null!=(o=c(e,"if").call(t,null!=n?c(n,"smallSrc"):n,{name:"if",hash:{},fn:l.program(1,a,0),inverse:l.noop,data:a,loc:{start:{line:3,column:2},end:{line:3,column:68}}}))?o:"")+"\n\t\t"+(null!=(o=c(e,"if").call(t,null!=n?c(n,"largeSrc"):n,{name:"if",hash:{},fn:l.program(3,a,0),inverse:l.noop,data:a,loc:{start:{line:4,column:2},end:{line:4,column:68}}}))?o:"")+"\n\t\t"+(null!=(o=c(e,"if").call(t,null!=n?c(n,"xLargeSrc"):n,{name:"if",hash:{},fn:l.program(5,a,0),inverse:l.noop,data:a,loc:{start:{line:5,column:2},end:{line:5,column:71}}}))?o:"")+'\n\t\t<span class="facade-of-protection-zoom"></span>\n\t</div>\n</div>\n'},useData:!0}),r={};l.Array.each([],function(n){var e=l.Template.get("hermes/"+n);e&&(r[n]=e)}),l.Template.register("hermes/zoom-modal",function(n,a){return a=a||{},a.partials=a.partials?l.merge(r,a.partials):r,e(n,a)})},"@VERSION@",{requires:["template-base","handlebars-base"]});YUI.add("animation-manager",function(n){n.AnimationManager=(function(){function i(){t&&(o.forEach(function(n,i){n()}),n.config.win.requestAnimationFrame(i))}function e(e){return o.push(e),t||(t=!0,n.config.win.requestAnimationFrame(i)),{detach:function(){o.splice(o.indexOf(e),1),o.length||(t=!1)}}}var a,t,o;return a||(t=!1,o=[],YUI.Env.isServer||n.config.win.requestAnimationFrame||(function(){var i,e,a=["webkit","moz"],t=0;for(e=0;e<a.length&&!n.config.win.requestAnimationFrame;++e)i=a[e],n.config.win.requestAnimationFrame=n.config.win[i+"RequestAnimationFrame"],n.config.win.cancelAnimationFrame=n.config.win[i+"CancelAnimationFrame"]||n.config.win[i+"CancelRequestAnimationFrame"];n.config.win.requestAnimationFrame&&n.config.win.cancelAnimationFrame||(n.config.win.requestAnimationFrame=function(n){var i=Date.now(),e=Math.max(t+16,i);return setTimeout(function(){n(t=e)},e-i)},n.config.win.cancelAnimationFrame=clearTimeout)})(),a={subscribe:e}),a})()},"@VERSION@",{requires:[]});YUI.add("zoom-view",function(e){e.FlickrView.create(this.name,e.FlickrView,[],{langBundles:this.details.langBundles,forceGPU:null,slowMoMode:!1,sizes:{},supportsMultiLevelZooming:!1,currentZoomLevel:null,currentZoomRegion:{},initializer:function(o){return this.photoId=o.photoId,this.disableIfSmall=!!o.disableIfSmall,YUI.Env.isServer||(e.config.win.location.search.indexOf("gpu=on")>-1?this.forceGPU=!0:e.config.win.location.search.indexOf("gpu=off")>-1&&(this.forceGPU=!1),this.currentZoomLevel=0),this},loadState:function(){var e=this;return this.appContext.getModel("photo-models",e.photoId).then(function(o){e.set("photo",o)})},buildContainer:function(){return this.setContainerHTML(""),this},activate:function(){var o=this,t=o.getZoomKeyScope();return this.get("photo").getValue("needsInterstitial")?this:(this.parentViewContainer=this.get("container").ancestor(".view"),o.registerEventHandler(o.get("container").on("click",function(e){e.preventDefault(),o.setCursorCoordsFromEvent(e),o.detectSlowMoMode(e),o.zoomIn(o.cursorCoords)})),o.registerEventHandler(e.on("photo:zoom",function(t){o.detectSlowMoMode({shiftKey:t.shift}),t.x&&t.y?(o.cursorCoords=[t.x-e.config.win.pageXOffset,t.y-e.config.win.pageYOffset],o.zoomIn(o.cursorCoords)):o.zoomIn()})),o.attachKeyEvent("down:90",e.betterThrottle(function(e){e.preventDefault(),o.detectSlowMoMode(e),o.canZoomIn()?o.zoomIn():o.zoomOut()},100),"*"),o.attachKeyEvent("down:27",e.betterThrottle(function(e){e.preventDefault(),o.detectSlowMoMode(e),o.zoomOut()},100),t),o.attachKeyEvent("down:37,38,39,40",e.betterThrottle(function(e){var t=[o.currentZoomRegion.left,o.currentZoomRegion.top];switch(e.preventDefault(),e.button){case 37:t[0]+=200;break;case 38:t[1]+=200;break;case 39:t[0]-=200;break;case 40:t[1]-=200}o.panZoomNode(t)},16),t),o.registerEventHandler(o.appContext.flapp.before("activeViewChange",function(t){e.fire("flickr:removeKeyEventScope",o.getZoomKeyScope()),o.detachRegisteredEvents(),o.detachEventHandlers(),o.cleanUp()})),this)},zoomIn:function(o){var t,i,n,r,s,a,h,d,l,g=this,u=this.getZoomPixelRatio(),m=this.getRegionForNode(this.get("container"),!0),c=this.maxMsgNode;if(this.sizes=this.getSizes(),this.sizes.xlarge&&this.sizes.xlarge.url?this.supportsMultiLevelZooming=!0:this.supportsMultiLevelZooming=!1,this.supportsMultiLevelZooming?0===this.currentZoomLevel?n=this.sizes.large:1===this.currentZoomLevel&&(n=this.sizes.xlarge):n=this.sizes.large,r=this.isImageReadyToDisplay(this.sizes.medium.url),s=this.isImageReadyToDisplay(this.sizes.large.url),this.supportsMultiLevelZooming&&(a=this.isImageReadyToDisplay(this.sizes.xlarge.url)),this.supportsMultiLevelZooming&&1===this.currentZoomLevel&&this.panningAnimationHandle.detach(),this.disableIfSmall&&m.width>=this.sizes.large.width)return c||(c=this.maxMsgNode=e.Node.create('<div class="zoom-max-message">'+g.intlMessage({intlName:"photo-page-scrappy.ZOOM_MAX_MESSAGE"})+"</div>")),this.get("container").contains(c)||(c.addClass("hidden"),this.get("container").append(c)),e.soon(function(){c&&c.inDoc()&&(c.removeClass("hidden"),this.maxMsgNodeHidingTimer&&(clearTimeout(this.maxMsgNodeHidingTimer),delete this.maxMsgNodeHidingTimer),this.maxMsgNodeHidingTimer=setTimeout(function(){c&&c.inDoc()&&c.addClass("hidden")},3e3))}),void this.resetSlowMoMode();e.fire("flickr:setKeyEventScope",this.getZoomKeyScope()),this.zoomingIn=!0,this.panningAnimationHandle=e.AnimationManager.subscribe(function(){var t,i,n=g.getDeteriorationRateForEasing(),r={x:0,y:0},s={x:0,y:0},a={x:0,y:0};g.pendingCoords&&(r.x=parseInt(g.pendingCoords[0],10),r.y=parseInt(g.pendingCoords[1],10),g.currentCoords?(s.x=g.currentCoords[0],s.y=g.currentCoords[1]):(t=g.getZoomPanCoordsForCursor(o),i=g.constrainPanCoords(t),s.x=parseInt(i[0],10),s.y=parseInt(i[1],10)),r.x<s.x?a.x=s.x-Math.abs(r.x-s.x)*n:a.x=s.x+Math.abs(r.x-s.x)*n,r.y<s.y?a.y=s.y-Math.abs(r.y-s.y)*n:a.y=s.y+Math.abs(r.y-s.y)*n,a.x=parseInt(a.x,10),a.y=parseInt(a.y,10),a.x===s.x&&(r.x<s.x?a.x=s.x-1:r.x>s.x&&(a.x=s.x+1)),a.y===s.y&&(r.y<s.y?a.y=s.y-1:r.y>s.y&&(a.y=s.y+1)),a.x===r.x&&a.y===r.y||((!0===g.forceGPU||e.config.win.devicePixelRatio>1)&&!1!==g.forceGPU?g.zoomPhotoContainerNode.setStyle("transform","translate3d("+a.x+"px, "+a.y+"px, 0)"):g.zoomPhotoContainerNode.setStyle("transform","translate("+a.x+"px, "+a.y+"px)")),g.currentCoords=[a.x,a.y],a.x===r.x&&a.y===r.y&&delete g.pendingCoords)}),this.zoomNode?(this.zoomingOut=!1,(t=this.zoomNode).removeClass("hiding"),this.detachEventHandlers()):t=this.zoomNode=e.Node.create(this.templates("zoom-modal")({smallSrc:r?this.sizes.medium.url:this.sizes.small.url,largeSrc:s?this.sizes.large.url:"",xLargeSrc:a?this.sizes.xlarge.url:""})),i=this.zoomPhotoContainerNode=t.one(".zoom-photo-container"),this.zoomImageFullWidth=n.width/u,this.zoomImageFullHeight=n.height/u,o||(g.cursorCoords=o=[this.appContext.viewportData.viewport.width/2,this.appContext.viewportData.viewport.height/2]),h=this.getZoomPanCoordsForCursor(o),h=this.constrainPanCoords(h),d={left:h[0],top:h[1],width:this.zoomImageFullWidth,height:this.zoomImageFullHeight},0===g.currentZoomLevel?(i.setStyle("transition","none"),this.resizeZoomNode(m,!1)):this.resizeZoomNode(this.getRegionForNode(i),!1),t.on("click",function(e){g.zoomingIn||(e.preventDefault(),g.detectSlowMoMode(e),g.canZoomIn()?(g.setCursorCoordsFromEvent(e),g.zoomIn(g.cursorCoords)):g.zoomOut())}),e.one("body").append(t),i.setStyle("width",d.width),i.setStyle("height",d.height),e.soon(function(){g.zoomingIn&&(t.removeClass("hidden"),i.setStyle("transition",""),"ontouchstart"in document&&e.use("event-touch",function(){g.touchHandlers=[],g.touchHandlers.push(e.on("touchstart",function(e){e.changedTouches.length&&1===e.changedTouches.length&&(g.touching=[e.changedTouches[0].pageX,e.changedTouches[0].pageY])})),g.touchHandlers.push(e.on("touchmove",function(e){var o,t,i=e.pageX,n=e.pageY;g.touching&&e.changedTouches.length&&1===e.changedTouches.length&&(i=e.changedTouches[0].pageX,n=e.changedTouches[0].pageY,e.preventDefault(),o=i-g.touching[0],t=n-g.touching[1],g.touching=[i,n],g.panZoomNode([g.currentZoomRegion.left+o,g.currentZoomRegion.top+t]))})),g.touchHandlers.push(e.on("touchend",function(e){delete g.touching}))}),t.on("mousemove",g.zoomMouseMoveHandler.bind(g)),g.mouseWheelHandler=(function(){var e=g.zoomScrollWheelHandler.bind(g);return l="onwheel"in document.createElement("div")?"wheel":"mousewheel",g.zoomNode.getDOMNode().addEventListener(l,e,!1),{detach:function(){g.zoomNode.getDOMNode().removeEventListener(l,e,!1)}}})(),g.parentViewContainer.addClass("zoomed"),g.resizeZoomNode(d,!0).then(function(){g.zoomingIn&&(g.zoomingIn=!1,g.zoomedIn=!0,i.removeClass("zoom-level-"+g.currentZoomLevel),g.currentZoomLevel+=1,i.addClass("zoom-level-"+g.currentZoomLevel),g.zoomNode.toggleClass("max-zoom-level",!g.canZoomIn()),g.resetSlowMoMode(),g.panZoomNodeToCurrentCoords(),s||i.append('<img src="'+g.sizes.large.url+'" class="zoom-large">'),g.supportsMultiLevelZooming&&!a&&i.append('<img src="'+g.sizes.xlarge.url+'" class="zoom-xlarge">'))}))})},zoomOut:function(){var o=this,t=this.zoomNode;e.fire("flickr:removeKeyEventScope",this.getZoomKeyScope()),this.detachEventHandlers(),this.resizeZoomNode(this.getRegionForNode(this.get("container"),!0),!0),t.addClass("hiding"),this.zoomedIn=!1,this.zoomingIn=!1,this.zoomingOut=!0,setTimeout(function(){o.zoomingOut&&t&&t._node&&(o.parentViewContainer.removeClass("zoomed"),t.removeClass("hiding"),t.addClass("hidden"),o.resetSlowMoMode(),setTimeout(function(){o.zoomingOut&&(o.cleanUp(),o.zoomingOut=!1,o.currentZoomLevel=0)},200))},this.getZoomTransitionTime()),delete this.pendingCoords,delete this.currentCoords},resizeZoomNode:function(o,t){var i,n,r=this,s=e.config.win.performance&&e.config.win.performance.now;return t?new e.Promise(function(t,a){function h(a){var d=(function(a){var h,d=((s?a:Date.now())-i)/r.getZoomTransitionTime();return d>=1?(h=o,r.isAnimatingZoom=!1,e.soon(t)):h={left:n.left+(o.left-n.left)*d,top:n.top+(o.top-n.top)*d,width:n.width+(o.width-n.width)*d,height:n.height+(o.height-n.height)*d},h})(a);(r.zoomingIn||r.zoomingOut)&&(r.resizeZoomNode(d,!1),d!==o&&e.config.win.requestAnimationFrame(h))}r.isAnimatingZoom=!0,i=s?e.config.win.performance.now():Date.now(),n=r.currentZoomRegion,e.config.win.requestAnimationFrame(h)}):(this.currentZoomRegion=o,this.zoomPhotoContainerNode&&this.zoomPhotoContainerNode.setStyle("transform","translate("+o.left+"px, "+o.top+"px) scale("+o.width/this.zoomImageFullWidth+")"),e.Promise.resolve())},zoomMouseMoveHandler:function(e){this.setCursorCoordsFromEvent(e),this.isAnimatingZoom||this.panZoomNodeToCurrentCoords()},zoomScrollWheelHandler:function(e){e.preventDefault();var o=e.wheelDeltaX,t=e.wheelDeltaY;void 0===o&&(o=-e.deltaX||0),void 0===t&&(t=-e.deltaY||0),this.panZoomNode([this.currentZoomRegion.left+o,this.currentZoomRegion.top+t])},getSizes:function(){var e=this.parentViewContainer.one(".low-res-photo"),o=this.parentViewContainer.one(".main-photo"),t=this.getLargerSize(o.getAttribute("src")),i=this.getLargestSize();return{small:{url:e.getAttribute("src"),width:parseInt(e.getAttribute("width"),10),height:parseInt(e.getAttribute("height"),10)},medium:{url:o.getAttribute("src"),width:parseInt(o.getAttribute("width"),10),height:parseInt(o.getAttribute("height"),10)},large:t,xlarge:t.url===i.url?null:i}},getLargerSize:function(o){var t,i,n,r=0,s=0;return this.appContext.flipper.isFlipped("enable-two-step-zoom")?("o"===(t=this.get("photo").getValue("ascendingSizes"))[t.length-1].key&&t.pop(),e.Array.each(t,function(e,t){e.url===o&&(r=t),"k"===e.key&&(s=t)}),(i=t[r+1])?(n=i,t[s]&&i.width<t[s].width&&(n=t[s])):n=t[t.length-1],n):this.getLargestSize()},getLargestSize:function(){return this.get("photo").getLargestSize()},getDeteriorationRateForEasing:function(){return.2},getZoomPixelRatio:function(){if(!this.appContext.flipper.isFlipped("enable-two-step-zoom"))return 1;var e,o=this.parentViewContainer.one(".main-photo");return o&&(o=o.getDOMNode()).naturalWidth&&(e=o.naturalWidth/parseInt(o.getAttribute("width"),10))<window.devicePixelRatio?e:window.devicePixelRatio?window.devicePixelRatio:1},getZoomEdgeMargin:function(){return 100},getZoomPanCoordsForCursor:function(e){if(e){var o=this.getZoomEdgeMargin(),t=[this.appContext.viewportData.getWidth(),this.appContext.viewportData.getHeight()],i=[e[0]/t[0],e[1]/t[1]],n=[this.zoomImageFullWidth,this.zoomImageFullHeight],r=[n[0]+2*o,n[1]+2*o];return[i[0]*(t[0]-r[0]),i[1]*(t[1]-r[1])]}},getRegionForNode:function(o,t){var i={left:o.getX()-e.config.win.pageXOffset,top:o.getY()-e.config.win.pageYOffset,width:parseInt(o.getStyle("width"),10),height:parseInt(o.getStyle("height"),10)};return t&&(i.left-=this.getZoomEdgeMargin(),i.top-=this.getZoomEdgeMargin()),i},getZoomTransitionTime:function(){return 200*(this.slowMoMode?10:1)},getZoomKeyScope:function(){return this.name+this._yuid},canZoomIn:function(){return 0===this.currentZoomLevel||this.supportsMultiLevelZooming&&1===this.currentZoomLevel},setCursorCoordsFromEvent:function(o){return this.cursorCoords=[o.pageX-e.config.win.pageXOffset,o.pageY-e.config.win.pageYOffset],this.cursorCoords},panZoomNodeToCurrentCoords:function(){if(this.zoomedIn){var e=this.getZoomPanCoordsForCursor(this.cursorCoords);e&&this.panZoomNode(e)}},panZoomNode:function(e){this.currentZoomRegion.left===e[0]&&this.currentZoomRegion.top===e[1]||(e=this.constrainPanCoords(e),this.currentZoomRegion.left=e[0],this.currentZoomRegion.top=e[1],this.pendingCoords=e)},constrainPanCoords:function(e){var o,t,i=this.getZoomEdgeMargin(),n=[this.appContext.viewportData.getWidth(),this.appContext.viewportData.getHeight()],r=[this.zoomImageFullWidth,this.zoomImageFullHeight],s=[r[0]+2*i,r[1]+2*i];return 0,o=n[0]-r[0]-2*i,0,t=n[1]-r[1]-2*i,e[0]>0?e[0]=0:e[0]<o&&(e[0]=o),e[1]>0?e[1]=0:e[1]<t&&(e[1]=t),r[0]<n[0]&&(e[0]=.5*(n[0]-s[0])),r[1]<n[1]&&(e[1]=.5*(n[1]-s[1])),e},detectSlowMoMode:function(e){e.shiftKey&&(document.getSelection().removeAllRanges(),this.slowMoMode=!0)},resetSlowMoMode:function(){this.slowMoMode=!1},isImageReadyToDisplay:function(e){var o;return!!e&&(o=new Image,o.src=e,o.complete||o.naturalWidth)},detachEventHandlers:function(){this.zoomNode&&(this.zoomNode.detachAll("mousemove"),this.mouseWheelHandler&&this.mouseWheelHandler.detach(),this.touchHandlers&&(this.touchHandlers.forEach(function(e){e.detach()}),delete this.touchHandlers))},cleanUp:function(){this.zoomNode&&(this.zoomNode.remove(!0),this.zoomedIn=!1,this.zoomingIn=!1,this.zoomingOut=!1,delete this.zoomNode,delete this.zoomPhotoContainerNode,delete this.pendingCoords,delete this.currentCoords,this.panningAnimationHandle.detach())}})},"@VERSION@",{requires:["flickr-view","better-throttle","flickr-promise","hermes-template-zoom-modal","animation-manager"],optional:["photo-models"],langBundles:["photo-page-scrappy"]});